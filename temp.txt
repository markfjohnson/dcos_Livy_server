
RUN apt-get install -yq --no-install-recommends --force-yes maven
RUN apt-get install -y git build-essential libssl-dev libcurl4-gnutls-dev libexpat1-dev gettext unzip openjdk-8-jdk openjdk-8-jre


#RUN curl $LIVY_DOWNLOAD_LINK -o /opt/$LIVY_SRC.zip
#RUN cd /opt/$LIVY_SRC && mvn package
#RUN cd /opt && unzip /opt/$LIVY_SRC.zip
#RUN ls -lt /opt    
#RUN cd /opt/$LIVY_SRC && mvn -DskipTests=true -Dspark.version=$SPARK_VERSION clean package

# Clone Livy repository


RUN git clone https://github.com/cloudera/livy.git 
RUN ls -lt /apps/build
RUN env
RUN mkdir -p /apps/build && \
    cd /apps/build && \
    git clone https://github.com/cloudera/livy.git && \
    cd livy && \
    mvn package -Dspark.version=$SPARK_VERSION
    
#RUN cd $LIVY_BUILD_PATH && \
#    mvn -DskipTests -Dspark.version=$SPARK_VERSION package && \
#    unzip $LIVY_BUILD_PATH/assembly/target/$LIVY_BUILD_VERSION.zip -d /apps && \
#    rm -rf $LIVY_BUILD_PATH && \
#	mkdir -p $LIVY_APP_PATH/upload
	
# Add custom files, set permissions
#ADD entrypoint.sh .

#RUN chmod +x entrypoint.sh

# Expose port
EXPOSE 8998

#ENTRYPOINT ["/entrypoint.sh"]
  